<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chain Of Thought Reasoning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ChainOfThoughtReasoning_files/libs/clipboard/clipboard.min.js"></script>
<script src="ChainOfThoughtReasoning_files/libs/quarto-html/quarto.js"></script>
<script src="ChainOfThoughtReasoning_files/libs/quarto-html/popper.min.js"></script>
<script src="ChainOfThoughtReasoning_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ChainOfThoughtReasoning_files/libs/quarto-html/anchor.min.js"></script>
<link href="ChainOfThoughtReasoning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ChainOfThoughtReasoning_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ChainOfThoughtReasoning_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ChainOfThoughtReasoning_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ChainOfThoughtReasoning_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Chain Of Thought Reasoning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="put-your-openrouter_api_key-here" class="level3">
<h3 class="anchored" data-anchor-id="put-your-openrouter_api_key-here">Put Your OPENROUTER_API_KEY here</h3>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">"OPENROUTER_API_KEY"</span>] <span class="op">=</span> <span class="st">"paste_your_api_key_here"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip3 install langchain langchain_openai</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain_openai <span class="im">import</span> ChatOpenAI</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    model_name</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">NameError</span>:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    model_name<span class="op">=</span><span class="st">"openai/gpt-4o-mini"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Model Name:"</span>, model_name)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Provider:"</span>, <span class="st">"OpenRouter AI"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>llm<span class="op">=</span>ChatOpenAI(model_name<span class="op">=</span>model_name,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>               openai_api_key<span class="op">=</span>os.environ.get(<span class="st">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>               openai_api_base<span class="op">=</span><span class="st">"https://openrouter.ai/api/v1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Model Name: openai/gpt-4o-mini
Provider: OpenRouter AI</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> textwrap</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain_core.prompts <span class="im">import</span> ChatPromptTemplate</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> wrap_text(text, max_width<span class="op">=</span><span class="dv">80</span>):</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Wraps the text to the specified max_width, preserving line breaks and formatting.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> text.lstrip()</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    lines <span class="op">=</span> text.splitlines()  <span class="co"># Split the text into lines</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    wrapped_lines <span class="op">=</span> []</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> line.strip():  <span class="co"># Skip empty lines</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            wrapped_line <span class="op">=</span> textwrap.fill(line, max_width, initial_indent<span class="op">=</span><span class="st">''</span>, subsequent_indent<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            wrapped_lines.extend(wrapped_line.splitlines())  <span class="co"># Preserve line breaks</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            wrapped_lines.append(<span class="st">''</span>)  <span class="co"># Keep empty lines</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join(wrapped_lines)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_prompt_and_response(prompt, response):</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Prompt: "</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(wrap_text(prompt))</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Response: "</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(response)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_messages_and_response(messages, response):</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    prompt <span class="op">=</span> ChatPromptTemplate(messages<span class="op">=</span>messages)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    print_prompt_and_response(prompt.<span class="bu">format</span>(), response)</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_completion(prompt, temperature<span class="op">=</span><span class="fl">0.0</span>):</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> llm.invoke(prompt, temperature<span class="op">=</span>temperature)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    wrapped_response <span class="op">=</span> wrap_text(response.content)</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapped_response</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_completion_messages(messages, temperature<span class="op">=</span><span class="fl">0.0</span>):</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    response<span class="op">=</span>llm.invoke(messages, temperature<span class="op">=</span>temperature)</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    wrapped_response <span class="op">=</span> wrap_text(response.content)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapped_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="chain-of-thought-reasoning---customer-queries" class="level2">
<h2 class="anchored" data-anchor-id="chain-of-thought-reasoning---customer-queries">Chain of Thought Reasoning - Customer Queries</h2>
<p>Here we want to build an application that allows us to answer questions from the customer using chain of thought (step-by-step) reasoning. This keeps the LLM from making up facts or not sticking with the important points about the customers queries.</p>
<section id="products" class="level3">
<h3 class="anchored" data-anchor-id="products">Products</h3>
<p>We will pretend we just have the products below and not others. That keeps our example small.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>product_descriptions<span class="op">=</span><span class="ss">f"""</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ss">- Product ID: DR001</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Product: Floral Print Sundress</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Department: Dresses</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Class: Casual Dresses</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Brand: Blossom</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Size Range: XS-XL</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Material: Rayon</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Rating: 4.6</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Features: Adjustable straps, tiered skirt, ruffled hem</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Description: A beautiful floral sundress perfect for spring and summer.</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Price: $39.99</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="ss">- Product ID: BT002</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Product: Distressed Boyfriend Jeans</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Department: Bottoms</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Class: Jeans</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Brand: DenimCo</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Size Range: 24-32</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Material: Cotton</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Rating: 4.4</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Features: Relaxed fit, ripped details, roll-up hems</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Description: Casual and trendy jeans with a lived-in look.</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Price: $54.99</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- Product ID: TP003</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Product: Striped Off-Shoulder Top</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Department: Tops</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Class: Blouses</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Brand: Trendy Threads</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Size Range: XS-XL</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Material: Rayon</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Rating: 4.7</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Features: Elasticized neckline, short sleeves, cropped length</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Description: A stylish and flirty off-shoulder top with classic stripes.</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Price: $24.99</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="ss">- Product ID: OW004</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Product: Faux Leather Moto Jacket</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Department: Outerwear</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Class: Jackets</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Brand: Rebel Edge</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Size Range: XS-XL</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Material: Polyurethane</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Rating: 4.5</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Features: Notched collar, asymmetrical zipper, zippered pockets</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Description: An edgy faux leather jacket with a modern moto style.</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Price: $69.99</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="ss">- Product ID: FW005</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Product: Embroidered Canvas Sneakers</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Department: Footwear</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Class: Sneakers</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Brand: Kick Start</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Size Range: 6-11</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Material: Canvas</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Rating: 4.3</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Features: Lace-up closure, embroidered floral design, rubber sole</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Description: Fun and fashionable sneakers with a vibrant embroidered pattern.</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Price: $44.99</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="ss">- Product ID: AC006</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Product: Tassel Crossbody Bag</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Department: Accessories</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Class: Bags</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Brand: BoHo Chic</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Material: Faux Leather</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Rating: 4.6</span></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Features: Adjustable strap, tassel accent, interior zip pocket</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Description: A trendy crossbody bag with boho style and flair.</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a><span class="ss">  - Price: $29.99</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="customer-queries" class="level3">
<h3 class="anchored" data-anchor-id="customer-queries">Customer Queries</h3>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>user_queries <span class="op">=</span> [</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I'm looking for a sundress for my daughter, but she's quite tall for her age. Do the Floral Print Sundresses come in sizes for pre-teens or juniors?"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I really like the look of the Distressed Boyfriend Jeans, but I'm worried they might be too loose and baggy. Do they run small or true to size?"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"The Striped Off-Shoulder Top looks so cute! I'm usually between a small and medium. Since it's cropped, should I size up to a large?"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I want to buy the Faux Leather Moto Jacket as a gift, but I'm not sure about the sizing. Do the jackets tend to run big or small? And do they have any stretch to them?"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"My teenage son is really into sneakers right now. I was thinking of getting him the Embroidered Canvas Sneakers, but he usually wears a men's size 11.5. Do these come in half sizes or just whole sizes?"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Do you carry any plus size options for the Floral Print Sundress or other dresses?"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"What is the return policy on shoes like the Embroidered Canvas Sneakers?"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I'm looking for a dress to wear to a summer wedding. Would the Floral Print Sundress be appropriate or too casual?"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Are the materials used for the Distressed Boyfriend Jeans environmentally friendly or sustainable?"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"My daughter wants a new backpack for school. Do you have any backpacks or bags in that department?"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"How often do you get new inventory for tops and blouses like the Striped Off-Shoulder Top?"</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Do any of your jackets like the Faux Leather Moto Jacket have a lining for colder weather?"</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I need to buy a gift for my teenage niece. What is popular with girls her age in your accessories department?"</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"My feet tend to sweat a lot. Are the materials used for the Embroidered Canvas Sneakers breathable?"</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"I'm looking for a new purse, but not one that's too big or bulky. What crossbody or smaller bag options do you have?"</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="a-prompt-without-chain-of-thought" class="level3">
<h3 class="anchored" data-anchor-id="a-prompt-without-chain-of-thought">A Prompt Without Chain of Thought</h3>
<p>First we create a system prompt without CoT (Chain of Thought)</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>delimiter <span class="op">=</span> <span class="st">"####"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>system_message1 <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="ss">Answer the customer queries.</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ss">The customer query will be delimited with the tags &lt;query&gt; and &lt;/query&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="ss">All available products:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>product_descriptions<span class="sc">}</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="ss">Answer the customer in a friendly tone.</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="a-prompt-with-chain-of-thought" class="level3">
<h3 class="anchored" data-anchor-id="a-prompt-with-chain-of-thought">A Prompt With Chain of Thought</h3>
<p>Now we create a system prompt with CoT technique:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>system_message2 <span class="op">=</span> <span class="ss">f"""</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ss">Follow these steps to answer the customer queries.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="ss">The customer query will be delimited with the tags &lt;query&gt; and &lt;/query&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 1:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> First decide whether the user is</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="ss">asking a question about a specific product or products.</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="ss">Department and class don't count.</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 2:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> If the user is asking about</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="ss">specific products, identify whether</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="ss">the products are in the following list.</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="ss">All available products:</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>product_descriptions<span class="sc">}</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 3:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> If the message contains products</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="ss">in the list above, list any assumptions that the</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="ss">user is making in their</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="ss">message e.g. that the sundress runs small, or that</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="ss">the sneakers come in half sizes.</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 4:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss">: If the user made any assumptions,</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="ss">figure out whether the assumption is true based on your</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="ss">product information.</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 5:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss">: First, politely correct the</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="ss">customer's incorrect assumptions if applicable.</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="ss">Only mention or reference products in the list of</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="ss">products, as these are the only products</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="ss">that the store sells.</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="ss">Answer the customer in a friendly tone.</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="ss">Use the following format:</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 1:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> &lt;step 1 reasoning&gt;</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 2:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> &lt;step 2 reasoning&gt;</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 3:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> &lt;step 3 reasoning&gt;</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="ss">Step 4:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> &lt;step 4 reasoning&gt;</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="ss">Response to user:</span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> &lt;response to customer&gt;</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="ss">Make sure to include </span><span class="sc">{</span>delimiter<span class="sc">}</span><span class="ss"> to separate every step.</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we are going to get responses using both techniques so we can compare them</p>
<p>For the CoT version we also have the LLM print out the “inner monologue” which is the steps and its reasons.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain_core.messages <span class="im">import</span> HumanMessage, SystemMessage</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#user_queries = user_queries[:2]</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> query <span class="kw">in</span> user_queries:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Query:"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(wrap_text(query))</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  prompt<span class="op">=</span><span class="ss">f"""</span><span class="sc">{</span>system_message1<span class="sc">}</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="ss">  &lt;query&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="ss">  </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="ss">  &lt;/query&gt;"""</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  response <span class="op">=</span> get_completion(prompt)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"-----Without CoT Response:-----"</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(response)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  prompt<span class="op">=</span><span class="ss">f"""</span><span class="sc">{</span>system_message2<span class="sc">}</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="ss">  &lt;query&gt;</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="ss">  </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="ss">  &lt;/query&gt;"""</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  response <span class="op">=</span> get_completion(prompt)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"-----CoT Response:--------"</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(response)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Query:
I'm looking for a sundress for my daughter, but she's quite tall for her age. Do
the Floral Print Sundresses come in sizes for pre-teens or juniors?

-----Without CoT Response:-----
Hello! The Floral Print Sundress is available in sizes ranging from XS to XL,
which typically accommodates a variety of body types, including some taller pre-
teens and juniors. It might be worth checking the size chart to see if it fits
your daughter's measurements. If you have any other questions or need further
assistance, feel free to ask!

-----CoT Response:--------
Step 1:#### The user is asking about a specific product, the Floral Print
Sundress.

Step 2:#### The Floral Print Sundress is in the list of available products.

Step 3:#### The user is assuming that the Floral Print Sundress comes in sizes
for pre-teens or juniors.

Step 4:#### The Floral Print Sundress is available in sizes XS-XL, which
typically does not include specific pre-teen or junior sizes.

Response to user:#### Thank you for your inquiry! The Floral Print Sundress is
available in sizes XS-XL, but it does not specifically offer sizes for pre-teens
or juniors. If your daughter is quite tall, you might consider sizing up to
ensure a comfortable fit. If you have any other questions or need further
assistance, feel free to ask!


Query:
I really like the look of the Distressed Boyfriend Jeans, but I'm worried they
might be too loose and baggy. Do they run small or true to size?

-----Without CoT Response:-----
Hi there! I'm glad to hear you're interested in the Distressed Boyfriend Jeans!
They are designed with a relaxed fit, which means they do have a looser and more
casual style. Most customers find that they run true to size, but if you prefer
a more fitted look, you might consider sizing down. If you have any other
questions or need help with sizing, feel free to ask! Happy shopping! 😊

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, which is the
Distressed Boyfriend Jeans.

Step 2:#### The Distressed Boyfriend Jeans (Product ID: BT002) is in the list of
available products.

Step 3:#### The user is assuming that the Distressed Boyfriend Jeans might run
small or true to size, indicating a concern about the fit being too loose and
baggy.

Step 4:#### Based on the product information, there is no specific mention of
the jeans running small or true to size. However, they are described as having a
relaxed fit, which suggests they are designed to be loose and comfortable.

Response to user:#### Thank you for your interest in the Distressed Boyfriend
Jeans! They are designed with a relaxed fit, which means they are intended to be
a bit loose and comfortable. If you're concerned about them being too baggy, I
recommend checking the size chart to find the best fit for you. If you have any
other questions, feel free to ask!


Query:
The Striped Off-Shoulder Top looks so cute! I'm usually between a small and
medium. Since it's cropped, should I size up to a large?

-----Without CoT Response:-----
Hi there! I'm glad to hear you love the Striped Off-Shoulder Top! Since it's
cropped and you're usually between a small and medium, sizing up to a large
could give you a bit more length and comfort. However, if you prefer a more
fitted look, you might want to stick with the medium. It really depends on your
personal style! If you have any other questions or need help with anything else,
feel free to ask! 😊

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, the Striped
Off-Shoulder Top.

Step 2:#### The Striped Off-Shoulder Top is in the list of available products.

Step 3:#### The user is assuming that they should size up to a large because the
top is cropped and they are usually between a small and medium.

Step 4:#### The Striped Off-Shoulder Top comes in sizes XS-XL, and since the
user is usually between a small and medium, it may not be necessary to size up
to a large. Cropped tops can vary in fit, but the user might find that a medium
could still work well for them.

Response to user:#### Thank you for your interest in the Striped Off-Shoulder
Top! Since you're usually between a small and medium, you might find that a
medium fits well, even with the cropped style. It's always a good idea to
consider how you like your tops to fit, but sizing up to a large may not be
necessary. If you have any more questions or need further assistance, feel free
to ask!


Query:
I want to buy the Faux Leather Moto Jacket as a gift, but I'm not sure about the
sizing. Do the jackets tend to run big or small? And do they have any stretch to
them?

-----Without CoT Response:-----
Hello! The Faux Leather Moto Jacket is a stylish choice for a gift! Generally,
this jacket runs true to size, but it’s always a good idea to check the size
range, which is XS-XL. As for stretch, the material is polyurethane, which
doesn’t have much stretch, so it’s best to stick to the size that corresponds to
the recipient's measurements. If you have any other questions or need help with
anything else, feel free to ask!

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, the Faux
Leather Moto Jacket.

Step 2:#### The Faux Leather Moto Jacket is in the list of available products.

Step 3:#### The user is assuming that the jacket may run big or small and is
inquiring about its stretchability.

Step 4:#### Based on the product information, the Faux Leather Moto Jacket is
available in sizes XS-XL, but there is no specific information provided about
whether it runs big or small. Additionally, the material is polyurethane, which
typically does not have much stretch.

Response to user:#### Thank you for your interest in the Faux Leather Moto
Jacket! Unfortunately, we don't have specific information on whether the jacket
runs big or small. However, it is available in sizes XS-XL. As for stretch, the
jacket is made from polyurethane, which generally does not offer much stretch.
If you have any other questions or need further assistance, feel free to ask!


Query:
My teenage son is really into sneakers right now. I was thinking of getting him
the Embroidered Canvas Sneakers, but he usually wears a men's size 11.5. Do
these come in half sizes or just whole sizes?

-----Without CoT Response:-----
Hi there! The Embroidered Canvas Sneakers come in whole sizes only, ranging from
size 6 to 11. Unfortunately, they don't offer half sizes. If your son typically
wears a men's size 11.5, he might want to try a size 11 for a snug fit or a size
12 for a bit more room. Let me know if you have any other questions or need help
with anything else!

-----CoT Response:--------
Step 1:#### The user is asking about a specific product, the Embroidered Canvas
Sneakers.

Step 2:#### The Embroidered Canvas Sneakers (Product ID: FW005) is in the list
of available products.

Step 3:#### The user is assuming that the sneakers come in half sizes, as they
mention their son usually wears a men's size 11.5.

Step 4:#### Based on the product information, the Embroidered Canvas Sneakers
are available in whole sizes only (6-11), and do not come in half sizes.

Response to user:#### Thank you for your interest in the Embroidered Canvas
Sneakers! However, I wanted to let you know that these sneakers are only
available in whole sizes (6-11) and do not come in half sizes. If your son
typically wears a men's size 11.5, you might want to consider sizing up to a
size 12 if you decide to go with these sneakers. Let me know if you have any
other questions!


Query:
Do you carry any plus size options for the Floral Print Sundress or other
dresses?

-----Without CoT Response:-----
Thank you for your inquiry! Currently, the Floral Print Sundress is available in
sizes XS to XL, but we don't have plus size options for this particular dress.
However, we do have a variety of other dresses that may suit your needs. If
you're looking for something specific or need assistance finding a dress in plus
sizes, feel free to let me know, and I'll be happy to help!

-----CoT Response:--------
Step 1:#### The user is asking about a specific product, the Floral Print
Sundress.

Step 2:#### The Floral Print Sundress is in the list of available products.

Step 3:#### The user is assuming that there are plus size options available for
the Floral Print Sundress.

Step 4:#### The Floral Print Sundress has a size range of XS-XL, which does not
include plus sizes.

Response to user:#### Thank you for your inquiry! Unfortunately, the Floral
Print Sundress is available only in sizes XS to XL, and we do not currently
carry plus size options for this dress. If you're looking for other styles or
sizes, feel free to ask, and I'll be happy to help!


Query:
What is the return policy on shoes like the Embroidered Canvas Sneakers?

-----Without CoT Response:-----
Hello! Thank you for your inquiry about our return policy. For shoes like the
Embroidered Canvas Sneakers, we typically allow returns within 30 days of
purchase, provided they are in their original condition and packaging. If you
have any more questions or need assistance with a return, feel free to ask!
Happy shopping!

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, the
Embroidered Canvas Sneakers.

Step 2:#### The Embroidered Canvas Sneakers (Product ID: FW005) is in the list
of available products.

Step 3:#### The user is assuming that the return policy applies specifically to
shoes, in this case, the Embroidered Canvas Sneakers.

Step 4:#### The assumption about the return policy being applicable to shoes is
generally true, as most retailers have a return policy for footwear. However,
specific details about the return policy are not provided in the product
information.

Response to user:#### Thank you for your question! While I can confirm that we
do have a return policy for shoes like the Embroidered Canvas Sneakers, I
recommend checking our website or contacting customer service for the specific
details regarding returns. If you have any other questions, feel free to ask!


Query:
I'm looking for a dress to wear to a summer wedding. Would the Floral Print
Sundress be appropriate or too casual?

-----Without CoT Response:-----
The Floral Print Sundress would be a lovely choice for a summer wedding! Its
beautiful floral design and tiered skirt give it a charming and elegant vibe,
perfect for such a special occasion. Plus, the adjustable straps and ruffled hem
add a touch of femininity. I think you'll look fantastic in it! If you have any
other questions or need help with sizing, feel free to ask!

-----CoT Response:--------
Step 1:#### The user is asking about a specific product, the Floral Print
Sundress.

Step 2:#### The Floral Print Sundress is in the list of available products.

Step 3:#### The user is assuming that the Floral Print Sundress may be too
casual for a summer wedding.

Step 4:#### Based on the product information, the Floral Print Sundress is
described as "a beautiful floral sundress perfect for spring and summer," which
suggests it is suitable for warm weather events. However, whether it is
appropriate for a wedding can depend on the specific dress code of the event.

Response to user:#### The Floral Print Sundress is a lovely choice for a summer
wedding! It is designed to be stylish and perfect for warm weather. However, the
appropriateness can depend on the wedding's dress code. If the wedding is more
formal, you might want to consider accessorizing it to elevate the look. Enjoy
the wedding!


Query:
Are the materials used for the Distressed Boyfriend Jeans environmentally
friendly or sustainable?

-----Without CoT Response:-----
Thank you for your question! The Distressed Boyfriend Jeans are made from
cotton, which is a natural fiber. While cotton is biodegradable, the
sustainability of the jeans can also depend on the farming practices used to
grow the cotton. Unfortunately, we don't have specific information on the
sourcing of the cotton for these jeans. If you're looking for more
environmentally friendly options, feel free to ask, and I can help you find
something that meets your needs!

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, which is the
Distressed Boyfriend Jeans.

Step 2:#### The Distressed Boyfriend Jeans (Product ID: BT002) is in the list of
available products.

Step 3:#### The user is assuming that the materials used for the Distressed
Boyfriend Jeans are environmentally friendly or sustainable.

Step 4:#### Based on the product information, the Distressed Boyfriend Jeans are
made from cotton. While cotton can be grown sustainably, the product description
does not specify whether the cotton used is organic or sourced sustainably.

Response to user:#### Thank you for your question! The Distressed Boyfriend
Jeans are made from cotton, but the product description does not specify if the
cotton is sourced sustainably or if the materials are environmentally friendly.
If you have any more questions or need further assistance, feel free to ask!


Query:
My daughter wants a new backpack for school. Do you have any backpacks or bags
in that department?

-----Without CoT Response:-----
Hello! While we don't have any backpacks specifically, we do have a lovely bag
that might be perfect for your daughter. It's the **Tassel Crossbody Bag** from
BoHo Chic. It features a trendy design with a tassel accent and an adjustable
strap, making it both stylish and functional. Plus, it has an interior zip
pocket for keeping her essentials organized. It’s priced at $29.99. Would you
like to know more about it?

-----CoT Response:--------
Step 1:#### The user is asking about a specific product, which is a backpack for
school.

Step 2:#### The user is inquiring about bags, and there is a product in the list
that fits this category: the Tassel Crossbody Bag (Product ID: AC006).

Step 3:#### The user assumes that there are backpacks available for school, but
they specifically mention "bags" which could include other types of bags.

Step 4:#### The assumption that there are backpacks available is not true based
on the product list provided. The only bag available is the Tassel Crossbody
Bag, which is not a backpack.

Response to user:#### Thank you for your inquiry! While we don't have any
backpacks available for school, we do have a lovely Tassel Crossbody Bag that
might be of interest. It's trendy and perfect for carrying essentials. If you'd
like more information about it, feel free to ask!


Query:
How often do you get new inventory for tops and blouses like the Striped Off-
Shoulder Top?

-----Without CoT Response:-----
Hello! Thank you for your inquiry about our tops and blouses. We typically
receive new inventory for our clothing items, including tops like the Striped
Off-Shoulder Top, on a regular basis. While the exact frequency can vary, we
strive to keep our selection fresh and up-to-date with the latest trends. If
you're looking for something specific, feel free to check back often or sign up
for our newsletter to stay informed about new arrivals. Happy shopping!

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, the Striped
Off-Shoulder Top.

Step 2:#### The Striped Off-Shoulder Top is in the list of available products.

Step 3:#### The user is assuming that there is a regular schedule for new
inventory of tops and blouses.

Step 4:#### The product information does not provide details about the frequency
of new inventory for tops and blouses.

Response to user:#### Thank you for your inquiry about the Striped Off-Shoulder
Top! Unfortunately, I don't have specific information on how often we receive
new inventory for tops and blouses. However, we do strive to keep our selection
fresh and updated. If you're interested in this particular top, I recommend
checking back regularly or signing up for notifications on new arrivals. Let me
know if you have any other questions!


Query:
Do any of your jackets like the Faux Leather Moto Jacket have a lining for
colder weather?

-----Without CoT Response:-----
Thank you for your question! The Faux Leather Moto Jacket does not specifically
mention a lining for colder weather in its features. However, it is designed
with a modern moto style that can be layered over other clothing for added
warmth. If you're looking for something to keep you cozy in colder temperatures,
you might consider wearing it over a thicker sweater or long-sleeve top. If you
have any other questions or need further assistance, feel free to ask!

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, the Faux
Leather Moto Jacket.

Step 2:#### The Faux Leather Moto Jacket is in the list of available products.

Step 3:#### The user is assuming that the Faux Leather Moto Jacket has a lining
suitable for colder weather.

Step 4:#### Based on the product information provided, there is no mention of a
lining for the Faux Leather Moto Jacket, so it cannot be confirmed that it is
suitable for colder weather.

Response to user:#### Thank you for your inquiry! The Faux Leather Moto Jacket
does not have a specified lining for colder weather, so it may not provide the
warmth you are looking for in colder conditions. If you have any other questions
or need assistance with something else, feel free to ask!


Query:
I need to buy a gift for my teenage niece. What is popular with girls her age in
your accessories department?

-----Without CoT Response:-----
Hi there! For a trendy gift for your teenage niece, I recommend the **Tassel
Crossbody Bag** from our accessories department. It's stylish and features a fun
tassel accent, plus it has an adjustable strap and an interior zip pocket for
convenience. With a rating of 4.6, it's quite popular and perfect for adding a
boho flair to any outfit. Plus, it's priced at just $29.99! I think she would
love it! If you have any other questions or need more options, feel free to ask!

-----CoT Response:--------
Step 1:#### The user is asking about a specific product category (accessories)
but not about a specific product.

Step 2:#### Since the user did not mention a specific product, I cannot identify
any products from the provided list.

Step 3:#### There are no assumptions made about specific products since the user
did not mention any.

Step 4:#### There are no assumptions to verify as no specific products were
mentioned.

Response to user:#### While I can't point to a specific product, I can recommend
the Tassel Crossbody Bag from our accessories department. It's trendy and has a
boho style that many teenage girls love. If you're interested, I can provide
more details about it!


Query:
My feet tend to sweat a lot. Are the materials used for the Embroidered Canvas
Sneakers breathable?

-----Without CoT Response:-----
Hello! The Embroidered Canvas Sneakers are made from canvas material, which is
generally breathable and allows for good airflow. This can help keep your feet
cooler and more comfortable, even if they tend to sweat. Plus, the fun
embroidered design adds a stylish touch! If you have any more questions or need
further assistance, feel free to ask!

-----CoT Response:--------
Step 1:#### The user is asking a question about a specific product, which is the
Embroidered Canvas Sneakers.

Step 2:#### The product in question, the Embroidered Canvas Sneakers, is indeed
in the list of available products.

Step 3:#### The user is assuming that the material of the sneakers may affect
their breathability, specifically in relation to foot sweat.

Step 4:#### The Embroidered Canvas Sneakers are made of canvas, which is
generally considered a breathable material. However, the product description
does not explicitly state that they are designed for maximum breathability.

Response to user:#### Thank you for your question! The Embroidered Canvas
Sneakers are made from canvas, which is typically a breathable material. While
they should provide some ventilation, the product description does not
specifically mention breathability features. If you have any more questions or
need further assistance, feel free to ask!


Query:
I'm looking for a new purse, but not one that's too big or bulky. What crossbody
or smaller bag options do you have?

-----Without CoT Response:-----
Hi there! If you're looking for a stylish and compact purse, I recommend the
**Tassel Crossbody Bag** from BoHo Chic. It's made of faux leather and features
an adjustable strap, a trendy tassel accent, and an interior zip pocket for your
essentials. Plus, it has a great rating of 4.6! It's perfect for a boho style
without being too big or bulky. And it's priced at just $29.99. Let me know if
you’d like more information or if you have any other questions!

-----CoT Response:--------
Step 1:#### The user is asking about a specific product, which is a purse or
bag.

Step 2:#### The user is inquiring about a crossbody or smaller bag option. The
only product in the list that fits this description is the Tassel Crossbody Bag
(Product ID: AC006).

Step 3:#### The user assumes that they are looking for a purse that is not too
big or bulky, which aligns with the characteristics of a crossbody bag.

Step 4:#### The assumption is true, as the Tassel Crossbody Bag is designed to
be trendy and not bulky, making it a suitable option for the user's needs.

Response to user:#### Hi there! I have a great option for you. We have the
Tassel Crossbody Bag, which is a trendy and stylish choice. It features an
adjustable strap and is designed to be compact, so it won't be too big or bulky.
It’s perfect for carrying your essentials while keeping a chic look. Would you
like to know more about it?

</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>